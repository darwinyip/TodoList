<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>Todo List</title>
	</head>
	<body>
		<h1 id="h1">Todo List</h1>
		<input type="text" id="text">
		<button type="button" onclick=l.appendItem()>Add to list</button>
		<ul id="ul">
		</ul>
		<script>
			class TodoList {
				constructor() {
					this.list = [];
					this.todoCount = 0;
				}

				updateCount(element) {
					if(element.checked) {
						this.todoCount--;
					}
					else {
						this.todoCount++;
					}
					document.getElementById("h1").textContent = "Todo List (" + this.todoCount + ")";
				}

				createItem(text) {
					let item = document.createElement("li");
					let box = document.createElement("input");
					box.setAttribute("type", "text");
					box.setAttribute("value", text);
					item.appendChild(box);
					let check = document.createElement("input");
					check.setAttribute("type", "checkbox");
					check.onchange = this.updateCount.bind(this, check);
					item.append(check);
					return item;
				}

				appendItem() {
					let form = document.getElementById("text");
					if(form.value) {
						let item = this.createItem(form.value);
						this.list.push(item);
						document.getElementById("ul").append(item);
						this.todoCount++;
						document.getElementById("h1").textContent = "Todo List (" + this.todoCount + ")";
					}
					form.value = "";
				}
			}

			let l = new TodoList();
		</script>
	</body>
</html>